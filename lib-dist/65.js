"use strict";(self.webpackChunkSDK=self.webpackChunkSDK||[]).push([[65],{65:(e,r,t)=>{t.r(r),t.d(r,{default:()=>n});var s=t(983),a=t(973);class n extends a.Z{_overridedProductsCatalog=[];_isDraft;_player=null;_sdk=null;_initObject=null;_isAuthorized=!1;_appID="0";_lang="EN";constructor(){super(),this._isDraft=location.href.startsWith("https://prod-dpgames.crazygames.com/")}get canShowAdOnLoading(){return!1}get locale(){let e=s.g.Russian;switch(this.lang){case"RU":case"BY":case"KZ":case"UA":case"UZ":e=s.g.Russian;break;case"TR":e=s.g.Turkish;break;case"DE":e=s.g.Deutsch;break;default:e=s.g.English}return e}get lang(){return this._lang.substring(0,2)}get tld(){return this._lang}get id(){return this._appID}get isAuthorized(){return this._isAuthorized}get isDraft(){return this._isDraft}async initialize(){const e=document.createElement("script");return e.src="https://sdk.crazygames.com/crazygames-sdk-v2.js",document.head.appendChild(e),new Promise((r=>{e.addEventListener("load",(()=>{this._sdk=window.CrazyGames.SDK,this._sdk.addInitCallback((e=>{this._initObject=e,this._appID=e.gameId??"0",this._lang=e.systemInfo.countryCode??"EN",this._sdk?.game.sdkGameLoadingStart(),r()}))}))}))}ready(){this._sdk?.game.sdkGameLoadingStop()}gameplayStart(){this._sdk?.game.gameplayStart()}gameplayStop(){this._sdk?.game.gameplayStop()}happyTime(){this._sdk?.game.happytime()}async isMe(e){return null==this._player?Promise.reject():e==this._player.uuid}async authorizePlayer(){return this._sdk?.user.showAuthPrompt(),Promise.reject()}async getPlayer(){if(null!==this._player)return this._player;if(!await(this._sdk?.user.getUser()))return this._player={get isAuthorized(){return!1},get hasNamePermission(){return!1},get hasPhotoPermission(){return!1},get name(){return""},get photo(){return{small:"",medium:"",large:""}},get uuid(){return""}},this._player;const e=await(this._sdk?.user.getUserToken()),r=this.parseJwt(e);return this._player={get isAuthorized(){return!0},get hasNamePermission(){return!0},get hasPhotoPermission(){return!0},get name(){return r.username},get photo(){return{small:r.profilePictureUrl,medium:r.profilePictureUrl,large:r.profilePictureUrl}},get uuid(){return r.userId}},this._player}sendAnalyticsEvent(e,r){console.log(`Analytic event sended (${e}) with data: ${JSON.stringify(r)}`)}showInterstitial(e){let r=!0;this._sdk?.ad.requestAd("midgame",{adStarted:()=>{e?.onOpen?.()},adError:(t,s)=>{r=!1,e?.onError?.(new Error(t))},adFinished:()=>{e?.onClose?.(r)}})}showRewarded(e){let r=!0;this._sdk?.ad.requestAd("rewarded",{adStarted:()=>{e?.onOpen?.()},adError:(t,s)=>{r=!1,e?.onError?.(new Error(t))},adFinished:()=>{e?.onRewarded?.(),e?.onClose?.(r)}})}async canReview(){return Promise.resolve({value:!1,reason:"UNKNOWN"})}async requestReview(){return Promise.reject()}async getPurchasedProducts(){const e=[];return e.signature="",Promise.resolve(e)}overrideProductsCatalog(e){this._overridedProductsCatalog.length=0,this._overridedProductsCatalog.push(...e)}async getProductCatalog(){return Promise.resolve(this._overridedProductsCatalog)}async purchaseProduct(e,r){return Promise.reject()}async consumeProduct(e){return console.log(`Product with token (${e}) consumed`),Promise.resolve()}async setLeaderboardScore(e,r,t){return console.log(`Set leaderboard (${e}) score (${r}) with extraData (${t})`),Promise.resolve()}async getLeaderboardEntries(e,r,t,s){const a={leaderboard:{name:e,dÐµfault:!1,description:{invert_sort_order:!1,score_format:{options:{decimal_offset:0}},type:"numeric"}},ranges:[],userRank:0,entries:[]};t??=5;for(let e=t;e>0;e--){const r={score:Math.round(1e3*Math.random()+1e3*e),extraData:"",rank:t-e+1,player:{get isAuthorized(){return!0},get hasNamePermission(){return!0},get hasPhotoPermission(){return!0},get name(){return"Debug Name"},get photo(){return{small:"https://i.pravatar.cc/256",medium:"https://i.pravatar.cc/256",large:"https://i.pravatar.cc/256"}},get uuid(){return""}},formattedScore:""};a.entries.push(r)}return Promise.resolve(a)}async getFlags(e){return e.defaultFlags??{}}parseJwt(e){if(!e)return{};const r=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),t=decodeURIComponent(window.atob(r).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(t)}}},973:(e,r,t)=>{t.d(r,{Z:()=>s});class s{get deviceInfo(){return{type:"desktop",isDesktop:()=>!0,isMobile:()=>!1,isTablet:()=>!1,isTV:()=>!1}}async getPlayerData(e){const r=JSON.parse(function(e){try{return localStorage.getItem("DATA")}catch{return null}}()??"{}");if(void 0===e)return r;const t={};for(const s of e)t[s]=r[s];return t}async setPlayerData(e){!function(e,r){try{localStorage.setItem("DATA",r)}catch{return}}(0,JSON.stringify(e))}}}}]);